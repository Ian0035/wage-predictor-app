{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ianho/OneDrive/Bureaublad/Predict%20wage/wage-predictor-app/src/app/page.tsx"],"sourcesContent":["'use client'; // if using App Router\n\nimport { useState } from 'react';\nimport { useRef, useEffect } from 'react';\n\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { div } from 'framer-motion/client';\n\n\ntype Message = {\n  role: 'user' | 'assistant';\n  content: string;\n};\n\nexport default function HomePage() {\n  const [messages, setMessages] = useState<Message[]>([]);\n  const [structuredData, setStructuredData] = useState(null);\n  const [missingField, setMissingField] = useState<string | null>(null);\n  const [nextQuestion, setNextQuestion] = useState<string | null>(null);\n  const [input, setInput] = useState('');\n  const messagesEndRef = useRef<HTMLDivElement | null>(null);\n\n  useEffect(() => {\n    if (messagesEndRef.current) {\n      messagesEndRef.current.scrollIntoView({ behavior: 'smooth' });\n    }\n  }, [messages]);\n\n  const sendMessage = async (message: string) => {\n    // Append user message to chat\n    const updatedMessages = [...messages, { role: 'user' as const, content: message }];\n    setMessages(updatedMessages);\n    setInput('');\n\n    // Build the conversation into one text block for LLM\n    const fullText = updatedMessages\n      .filter((m) => m.role === 'user')\n      .map((m) => m.content)\n      .join('. ');\n\n    const res = await fetch('https://wage-predictor-app-backend.onrender.com/wage/analyze', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ text: fullText }),\n    });\n\n    const data = await res.json();\n    setStructuredData(data);\n\n    if (data.missingFields.length > 0) {\n      const next = data.nextQuestion || `Can you tell me your ${data.missingFields[0]}?`;\n      setNextQuestion(next);\n      setMissingField(data.missingFields[0]);\n      setMessages([...updatedMessages, { role: 'assistant', content: next }]);\n    } else {\n        setNextQuestion(null);\n        setMissingField(null);\n        setMessages([...updatedMessages, { role: 'assistant', content: 'Thanks! I have everything I need.' }]);\n\n        // ðŸ”¥ Call the R Plumber API\n        try {\n          const predictRes = await fetch('https://wage-predictor-app-backend.onrender.com/wage/predict', {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({\n              age: data.age,\n              years_experience: data.years_experience,\n              education: data.education,\n              gender: data.gender,\n              country: data.country,\n              industry: data.industry,\n            }),\n          });\n\n          const prediction = await predictRes.json();\n          console.log('Prediction response:', prediction);\n\n          const wage = Number(prediction.predictedWage);\n          const formatted = isNaN(wage) ? 'N/A' : wage.toFixed(2);\n\n          setMessages(prev => [\n            ...prev,\n            { role: 'assistant', content: `Your predicted wage is **$${formatted}**.` }\n          ]);\n        }  catch (error) {\n              console.error('Frontend error calling /predict:', error); // <â€” add this line\n              setMessages(prev => [\n                ...prev,\n                { role: 'assistant', content: 'Sorry, there was an error making the prediction.' }\n              ]);\n\n        }\n      }\n\n        };\n\n        const handleSubmit = (e: React.FormEvent) => {\n          e.preventDefault();\n          if (!input.trim()) return;\n          sendMessage(input.trim());\n  };\n\n  return (\n  <div className=\"min-h-screen flex flex-col relative\">\n    <AnimatePresence>\n\n    {messages.length === 0 && (\n        <><motion.div\n          initial={{ opacity: 1 }}\n          animate={{ opacity: 1 }}\n          exit={{ opacity: 0 }}\n          transition={{ duration: 0.6 }}\n          className=\"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[300px] h-[260px] -z-10 pointer-events-none\">\n          {/* Back lines (left + bottom) */}\n          <svg viewBox=\"0 0 300 260\" className=\"glow-triangle absolute scale-[2] w-full h-full pointer-events-none\">\n            <line x1=\"10\" y1=\"250\" x2=\"150\" y2=\"10\" stroke=\"#00FF88\" strokeWidth=\"4\" />\n            <line x1=\"290\" y1=\"250\" x2=\"10\" y2=\"250\" stroke=\"#00FF88\" strokeWidth=\"4\" />\n          </svg>\n        </motion.div>\n        <motion.div\n        initial={{ opacity: 1 }}\n        animate={{ opacity: 1 }}\n          exit={{ opacity: 0 }}\n        transition={{ duration: 0.6 }}\n         className=\"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[300px] h-[260px] z-20 pointer-events-none\">\n            {/* Top line (now foreground) */}\n            <svg viewBox=\"0 0 300 260\" className=\"glow-triangle absolute scale-[2] w-full h-full pointer-events-none\">\n              <line x1=\"150\" y1=\"10\" x2=\"290\" y2=\"250\" stroke=\"#00FF88\" strokeWidth=\"4\" />\n            </svg>\n          </motion.div>\n          <motion.div\n          initial={{ opacity: 1 }}\n          animate={{ opacity: 1 }}\n          exit={{ opacity: 0 }}\n          transition={{ duration: 0.6 }}\n           className=\"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 -z-10\">\n            <svg\n              width=\"600\"\n              height=\"520\"\n              viewBox=\"0 0 300 260\"\n              fill=\"none\"\n              xmlns=\"http://www.w3.org/2000/svg\"\n            >\n              <polygon\n                points=\"150,10 290,250 10,250\"\n                stroke=\"#00FF88\"\n                strokeWidth=\"4\"\n                fill=\"none\" />\n            </svg>\n          </motion.div></>\n\n    )}\n    </AnimatePresence>\n\n    {/* Background gradient */}\n    {/* Background circles */}\n    <div className=\"circle circle1\" />\n    <div className=\"circle circle2\" />\n    <div className=\"circle circle3\" />\n    <div className=\"circle circle4\" />\n  <div className={` ${\n                messages.length === 0\n                  ? 'mt-auto mb-auto'\n                  : 'min-h-screen flex flex-col items-center px-4'\n              }`}>\n  <motion.main\n    className=\"w-full max-w-2xl mx-auto p-6 flex flex-col space-y-4 flex-grow\"\n    layout\n    transition={{ duration: 0.8, ease: 'easeInOut' }}\n  >\n    {/* Title */}\n    <motion.h1\n      className=\"mb-4 text-3xl font-extrabold text-gray-900 dark:text-white md:text-5xl lg:text-6xl text-center z-10 pb-2 flex-none\"\n      initial={{ opacity: 0, y: -80 }}\n      animate={{ opacity: 1, y: 0 }}\n      transition={{ duration: 0.6 }}\n    >\n    <span className=\"text-transparent bg-clip-text bg-gradient-to-r from-green-400 to-blue-400\">Use AI</span> to predict your wage\n    </motion.h1>\n\n    <AnimatePresence>\n      {messages.length > 0 && (\n        <motion.div\n          key=\"chat\"\n          layout\n          className=\"rounded space-y-4 flex flex-col flex-1\"\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          exit={{ opacity: 0, y: 20 }}\n          transition={{ duration: 0.5, ease: 'easeInOut' }}\n        >\n          {/* Scrollable message box */}\n          <div className=\"flex-1 overflow-y-auto max-h-[60vh]\">\n            {messages.map((msg, idx) => (\n              <motion.div\n                key={idx}\n                className={`max-w-xs w-fit py-2 px-3 mx-3 my-3 rounded-lg text-white relative ${\n                  msg.role === 'user'\n                    ? 'bg-black/30 border-2 border-green-400 shadow-[0_0_12px_2px_#00FF88] self-end ml-auto'\n                    : 'bg-black/30 border-2 border-blue-400 shadow-[0_0_12px_2px_#00CCFF] self-start mr-auto'\n                }`}\n                initial={{ opacity: 0, y: 50 }}\n                animate={{ opacity: 1, y: 0 }}\n                transition={{\n                  delay: idx === 0 || idx === 1 ? 1 : 0,\n                  duration: 0.3,\n                }}\n              >\n                {msg.content}\n                <div ref={messagesEndRef} />\n              </motion.div>\n              \n            ))}\n          </div>\n        </motion.div>\n      )}\n    </AnimatePresence>\n\n\n    {/* Input form */}\n    <motion.form\n      onSubmit={handleSubmit}\n      className=\"flex space-x-2 flex-none z-10\"\n      layout\n      initial={{ opacity: 0, y: 80 }}\n      animate={{ opacity: 1, y: 0 }}\n      transition={{ duration: 0.8, ease: 'easeInOut' }}\n    >\n      <input\n        type=\"text\"\n        className=\"flex-grow p-3 rounded-xl border-2 placeholder-gray-300\"\n        placeholder=\"Describe yourself (e.g. I'm 39, live in Copenhagen...)\"\n        value={input}\n        onChange={(e) => setInput(e.target.value)}\n      />\n      <button\n        type=\"submit\"\n        className={`px-4 py-2 rounded ${\n          missingField ? 'bg-gray-600 text-white' : 'bg-green-600 text-white'\n        }`}\n      >\n        {missingField ? 'Continue' : 'Predict'}\n      </button>\n    </motion.form>\n  </motion.main>\n</div>\n</div>\n  );\n}\n\n"],"names":[],"mappings":"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","debugId":null}}]
}